<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>欢迎登陆商业银行贷款风险评估系统</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/layout.css">
    <script src="js/jquery.min.js"></script>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>商业银行贷款风险评估系统</h1>
        </div>
        <div class="form-horizontal">
            <div class="bodypart">
                <div class="form-group">
                    <label for="userID" class="col-sm-4 col-md-4 col-lg-4 control-label">客户账号</label>
                    <div class="col-sm-8 col-md-4 col-lg-4">
                        <input type="text" class="form-control" id="userID" placeholder="请输入19位客户账号">
                    </div>
                </div>
                <div class="form-group">
                    <label for="userPassword" class="col-sm-4 col-md-4 col-lg-4 control-label">客户密码</label>
                    <div class="col-sm-8 col-md-4 col-lg-4">
                        <input type="password" class="form-control" id="userPassword" placeholder="请输入6位数字密码">
                    </div>
                </div>
                <div class="divCenter">
                    <button id="submit" class="btn btn-default">登陆</button>
                </div>
            </div>
        </div>

    </div>
    <script>
        $(function() {
            $("#submit").click(function() {
                var userID = $("#userID").val();
                var userPassword = $("#userPassword").val();
                if (!userID) {
                    alert("客户账号不能为空，请输入19位数字客户账号！");
                    return false;
                }
                if (!userPassword) {
                    alert("客户密码不能为空，请输入6位数字客户账号！");
                    return false;
                }
                if (!testUserID(userID)) {
                    alert("请按照正确格式输入客户账号！");
                    return false;
                }
                if (!testUserPassword(userPassword)) {
                    alert("请按照正常格式输入客户密码！");
                    return false;
                }

                var data = {
                    userID: userID,
                    userPassword: userPassword
                };

                $.ajax({
                    url: "http://main.fst1.club/login",
                    type: "POST",
                    dataType: "json",
                    data: data,
                    success: function(res) {
                        console.log("success", res);
                        if ((!res.data.error) && res.data.state == "600") {
                            console.log("恭喜你，登录成功！！！！");
                            window.location.href = "home.html";
                            //跳转代码。
                        };
                        if (res.data.error) {
                            switch (res.data.state) {
                                case 601:
                                    alert("密码错误，请重新输入！");
                                    break;
                                case 604:
                                    alert("客户账号错误，请重新输入！");
                                    break;
                            }
                        }
                    },
                    error: function(res) {
                        console.log("error", res);
                    }
                });
            });

            function testUserID(name) {
                var pattern = /^\d{19}$/;
                return pattern.test(name);
            };

            function testUserPassword(pass) {
                var pattern = /^\d{6}$/;
                return pattern.test(pass);
            };
        });

    </script>
</body>

</html>
